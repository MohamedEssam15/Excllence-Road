(()=>{var e=document.documentElement.lang||"ar";function t(t){var o=document.getElementById("toastContainer");"ar"==e?o.style.marginLeft="1%":o.style.marginRight="1%";var r=document.getElementById("toastr");r.querySelector(".toast-body").innerHTML=t,new bootstrap.Toast(r,{delay:3e3}).show()}function o(t){var o=t.errors||[];!function(t){var o=document.getElementById("toastContainerError");"ar"==e?o.style.marginLeft="1%":o.style.marginRight="1%";var r=document.getElementById("toastrError");r.querySelector(".toast-body").innerHTML=t,new bootstrap.Toast(r,{delay:3e3}).show()}(o.length>0?o.join("<br>"):t.message||"An unexpected error occurred")}$(document).ready((function(){var e=document.getElementById("modifyModal"),r=document.getElementById("addDiscountModal"),s=document.getElementById("removeDiscountModal"),a=document.getElementById("deleteCourseModal");e.addEventListener("show.bs.modal",(function(t){var o=t.relatedTarget,r=o.getAttribute("data-bs-courseid"),s=o.getAttribute("data-bs-coursename"),a=o.getAttribute("data-bs-teachercommision"),d=o.getAttribute("data-bs-ispopular"),n=o.getAttribute("data-bs-ismobileonly");1==d?$("#addToPopularCourses").prop("checked",!0):$("#addToPopularCourses").prop("checked",!1),1==n?$("#isMobileOnly").prop("checked",!0):$("#isMobileOnly").prop("checked",!1);var u=e.querySelector(".modal-title"),c=document.getElementById("course-id"),i=document.getElementById("teacherCommisionInput");u.textContent=s,c.value=r,i.value=a})),$("#modifyCourseButton").click((function(){var e=$("#modifyCourseForm").serialize();$.ajax({type:"POST",url:baseUrl+"/courses/modify-course",data:e,success:function(e){200==e.status?($("#modifyModal").modal("hide"),fetchCourses(),t()):o(e)},error:function(e,t,r){o(e.responseJSON||{message:"An unexpected error occurred."})}})})),r.addEventListener("show.bs.modal",(function(e){document.getElementById("addDiscountForm").reset();var t=e.relatedTarget,o=t.getAttribute("data-bs-courseid"),s=t.getAttribute("data-bs-coursename"),a=r.querySelector(".modal-title"),d=document.getElementById("add-discount-course-id");a.textContent=s,d.value=o})),$("#addDiscountButton").click((function(e){e.preventDefault();var r=$("#addDiscountForm").serialize();$.ajax({type:"POST",url:baseUrl+"/courses/add-discount",data:r,success:function(e){200==e.status?($("#addDiscountModal").modal("hide"),fetchCourses(),t(e.message)):o(e)},error:function(e,t,r){o(e.responseJSON||{message:"An unexpected error occurred."})}})})),$("#addDiscountForm").submit((function(e){e.preventDefault();var r=$(this).serialize();$.ajax({type:"POST",url:baseUrl+"/courses/add-discount",data:r,success:function(e){200==e.status?($("#addDiscountModal").modal("hide"),fetchCourses(),t(e.message)):o(e)},error:function(e,t,r){o(e.responseJSON||{message:"An unexpected error occurred."})}})})),s.addEventListener("show.bs.modal",(function(e){document.getElementById("removeDiscountForm").reset();var t=e.relatedTarget,o=t.getAttribute("data-bs-courseid"),r=t.getAttribute("data-bs-coursename"),a=s.querySelector(".modal-title"),d=document.getElementById("remove-discount-course-id");a.textContent=r,d.value=o})),$("#removeDiscountButton").click((function(e){e.preventDefault();var r=$("#removeDiscountForm").serialize();$.ajax({type:"POST",url:baseUrl+"/courses/remove-discount",data:r,success:function(e){200==e.status?($("#removeDiscountModal").modal("hide"),fetchCourses(),t(e.message)):($("#removeDiscountModal").modal("hide"),o(e))},error:function(e,t,r){var s=e.responseJSON||{message:"An unexpected error occurred."};$("#removeDiscountModal").modal("hide"),o(s)}})})),a.addEventListener("show.bs.modal",(function(e){document.getElementById("removeDiscountForm").reset();var t=e.relatedTarget,o=t.getAttribute("data-bs-courseid"),r=t.getAttribute("data-bs-coursename"),s=a.querySelector(".modal-title"),d=document.getElementById("delete-course-id");s.textContent=r,d.value=o})),$("#deleteCourseButton").click((function(e){e.preventDefault();var r=$("#deleteCourseForm").serialize();$.ajax({type:"POST",url:baseUrl+"/courses/delete-course",data:r,success:function(e){200==e.status?($("#deleteCourseModal").modal("hide"),fetchCourses(),t(e.message)):($("#deleteCourseModal").modal("hide"),o(e))},error:function(e,t,r){var s=e.responseJSON||{message:"An unexpected error occurred."};$("#deleteCourseModal").modal("hide"),o(s)}})}))}))})();